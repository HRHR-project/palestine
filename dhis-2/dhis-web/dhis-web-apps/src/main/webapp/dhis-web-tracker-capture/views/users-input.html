<ui-select  ng-model="d2Model[d2ModelId]"
            theme="select2"
            ng-required="d2Required"                                  
            attribute-data=d2AttributeData
            selected-program-id=d2SelectedProgramId  
            selected-tei-id=d2SelectedTeiId 
            ng-disabled="d2Disabled" 
            on-select="saveOption()"
            ng-style="{'width': '100%'}"
            name="foo">
    <ui-select-match allow-clear="true"  class="form-control-ui-select"  placeholder="{{'select_or_search' | translate}}">{{$select.selected.displayName  || $select.selected.username}}</ui-select-match>
    <ui-select-choices  repeat="user in allUsers | filter: $select.search | limitTo:d2MaxOptionSize">
        <span ng-bind-html="user.username | highlight: $select.search"></span>
    </ui-select-choices>
</ui-select>